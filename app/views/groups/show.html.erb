<% content_for :head do %>
  <style>
    main { max-width: none !important; margin: 0 !important; padding: 0 !important; }
  </style>
<% end %>

<div class="min-h-screen bg-[#0D0D0D]">
  <%= render 'shared/header' %>

  <div class="w-full px-6 py-6">
    <!-- シナリオ名 -->
    <div class="mb-6">
      <h1 class="text-white text-2xl font-bold border-2 border-white rounded-lg px-6 py-3 inline-block">
        <%= @group.name %>
      </h1>
    </div>

    <!-- メンバー一覧 -->
    <div class="mb-6">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <% 4.times do |i| %>
          <div class="text-center">
            <!-- ロール表示 (KP/PL) -->
            <div class="mb-2">
              <span class="border border-white text-white px-4 py-1 rounded text-sm">
                <%= i == 0 ? 'KP' : 'PL' %>
              </span>
            </div>

            <!-- アイコン -->
            <div class="w-24 h-24 mx-auto border border-white rounded-full flex items-center justify-center mb-2">
              <span class="text-white text-xs">アイコン</span>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <!-- ユーザー情報カード -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
      <% 4.times do |i| %>
        <div class="bg-[#1a1a1a] border border-white rounded-lg p-4">
          <div class="text-white text-sm space-y-1">
            <p><strong>ユーザー名:</strong></p>
            <p class="mb-2"><%= i == 0 ? 'KPユーザー' : "PLユーザー#{i}" %></p>

            <p><strong>基本日程:</strong></p>
            <p class="mb-2">
              <% if i == 0 %>
                平日21時〜25時<br>休日10時〜25時
              <% else %>
                平日21時〜25時<br>休日10時〜25時
              <% end %>
            </p>
          </div>
        </div>
      <% end %>
    </div>

    <!-- 自由コメント欄 -->
    <div class="mb-6">
      <div class="bg-[#1a1a1a] border border-white rounded-lg p-6 min-h-[150px]">
        <h2 class="text-white text-lg font-bold mb-3">自由コメント欄</h2>
        <div class="text-gray-400 text-sm">
          <!-- コメント内容がここに表示されます -->
        </div>
      </div>
    </div>

    <!-- 自動調整/手動調整ボタン -->
    <div class="flex justify-end gap-4 mb-6">
      <button class="border-2 border-white text-white px-6 py-2 rounded-lg hover:bg-white hover:text-black transition-colors duration-200">
        自動調整
      </button>
      <button class="border-2 border-white text-white px-6 py-2 rounded-lg hover:bg-white hover:text-black transition-colors duration-200">
        手動調整
      </button>
    </div>

    <!-- カレンダー表示エリア -->
    <div class="bg-[#1a1a1a] border border-white rounded-lg p-6">
      <div class="text-white">
        <!-- カレンダーヘッダー -->
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold"><%= @calendar[:year] %>年 <%= @calendar[:month] %>月</h2>
        </div>

        <!-- 曜日ヘッダー -->
        <div class="grid grid-cols-7 gap-2 mb-2">
          <% @calendar[:weekdays].each_with_index do |weekday, index| %>
            <div class="text-center font-bold py-2 <%= index == 0 ? 'text-red-400' : (index == 6 ? 'text-blue-400' : 'text-white') %>">
              <%= weekday %>
            </div>
          <% end %>
        </div>

        <!-- カレンダーグリッド -->
        <div class="grid grid-cols-7 gap-2">
          <% @calendar[:days].each do |day| %>
            <% if day.nil? %>
              <div class="aspect-square"></div>
            <% else %>
              <div class="aspect-square border <%= day[:is_today] ? 'border-yellow-400 bg-yellow-900/30' : 'border-gray-600' %> rounded p-2 hover:bg-gray-800 transition-colors cursor-pointer">
                <div class="text-sm <%= day[:is_weekend] ? (day[:date].sunday? ? 'text-red-400' : 'text-blue-400') : 'text-white' %> <%= day[:is_today] ? 'font-bold' : '' %>">
                  <%= day[:day] %>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
